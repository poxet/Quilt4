@model Quilt4.Web.Models.SendEmailViewModel

@{
    ViewBag.Title = "Email";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="panel panel-default">

    <div class="panel-heading">

        Send Email

    </div>

    <div class="panel-body">

        <div class="col-lg-4">

            @using (@Html.BeginForm("SendTestEmail", "Email", "Email"))
            {
                @Html.HiddenFor(x => x.EmailEnabled)

                <div class="form-group input-group">

                    <span class="input-group-addon">&#64;</span>
                    @Html.TextBoxFor(m => m.ToEmail, null, new { @class = "form-control", @placeholder = "Email" })

                </div>

                <div class="form-group">
                    @Html.TextBoxFor(m => m.Subject, null, new { @class = "form-control", @placeholder = "Subject" })
                </div>

                <div class="form-group">
                    @Html.TextAreaFor(m => m.Body, new { @class = "form-control", @rows = "3", @placeholder = "Text" })
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-default">Send</button>
                </div>
            }

        </div>

        <div class="col-lg-4">
            @if (!@Model.EmailEnabled)
            {
                <div class="alert alert-warning alert-dismissable">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                    No emails will be sent, check config
                </div>
            }

            @if (string.IsNullOrEmpty(ViewBag.ErrorMessage) == false)
            {
                <div class="alert alert-danger alert-dismissable">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                    @ViewBag.ErrorMessage
                </div>
            }
        </div>

    </div>

</div>